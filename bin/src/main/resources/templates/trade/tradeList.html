<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" th:href="@{/css/trade/tradeList.css}">
<script type="text/javascript" th:src="@{/js/trade.js}"></script>
<title>매물 보기</title>
<script>
	const message = '[[${message}]]';
	message && alert(message);
	
</script>
</head>
<body>
    <div th:replace="common/header.html"></div>
    <div class="outer outer-trade-list" style="margin: 100px 350px;">
        <div class="list-title">
            <h2>매물 보기</h2>
            <div class="search">
            	<form id="searchFoam" th:action="@{/trade/list}" method="get">
            		<th:block th:if="${ searchValue != null }">
		                <input type="search" id="searchValue" name="searchValue" placeholder="  Search" th:value="${ searchValue }">
		            </th:block>
		            <th:block th:if="${ searchValue == null }">
		                <input type="search" id="searchValue" name="searchValue" placeholder="  Search">
		            </th:block>
		            <button type="submit" onclick="tradeSearch();"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></button>
                </form>
            </div>
        </div>
        <form id="categoryFoam" th:action="@{/trade/criteria}" method="get">
	        <div class="category-area" style="margin-bottom: 20px;">
	            <div class="container1">
	                <div class="container1-item"><h5>차종</h5></div>
	                <div class="container1-item"><select id="model" name="model.modelCode">
	                    <option value="0">차종 선택</option>
	                    <option value="1">경차</option>
	                    <option value="2">소형</option>
	                    <option value="3">준중형</option>
	                    <option value="4">중형</option>
	                    <option value="5">대형</option>
	                    <option value="6">스포츠카</option>
	                    <option value="7">SUV</option>
	                    <option value="8">트럭</option>
	                    <option value="9">기타</option>
	                </select></div>
	                <div class="container1-item"><h5>연식</h5></div>
	                <div class="container1-item"><select id="year" name="sellCarYear">
	                    <option value="0" selected>연식 선택</option>
	                    <option value="2023">2023년</option>
	                    <option value="2022">2022년</option>
	                    <option value="2021">2021년</option>
	                    <option value="2020">2020년</option>
	                    <option value="2019">2019년</option>
	                    <option value="2018">2018년</option>
	                    <option value="2017">2017년</option>
	                    <option value="2016">2016년</option>
	                    <option value="2015">2015년</option>
	                    <option value="2014">2014년</option>
	                    <option value="2013">2013년</option>
	                    <option value="2012">2012년</option>
	                    <option value="2011">2011년</option>
	                    <option value="2010">2010년</option>
	                    <option value="2009">2009년</option>
	                    <option value="2008">2008년</option>
	                    <option value="2007">2007년</option>
	                    <option value="2006">2006년</option>
	                    <option value="2005">2005년</option>
	                    <option value="2004">2004년</option>
	                    <option value="2003">2003년</option>
	                    <option value="2002">2002년</option>
	                    <option value="2001">2001년</option>
	                    <option value="2000">2000년</option>
	                </select></div>
	
	                <div class="container1-item"><h5>지역</h5></div>
	                <div class="container1-item"><select id ="region" name="region.regionCode">
	                    <option value="0" selected>지역 선택</option>
	                    <option value="1">서울</option>
	                    <option value="2">인천</option>
	                    <option value="3">대전</option>
	                    <option value="4">대구</option>
	                    <option value="5">광주</option>
	                    <option value="6">울산</option>
	                    <option value="7">세종</option>
	                    <option value="8">경기</option>
	                    <option value="9">강원</option>
	                    <option value="10">경남</option>
	                    <option value="11">경북</option>
	                    <option value="12">전남</option>
	                    <option value="13">전북</option>
	                    <option value="14">충남</option>
	                    <option value="15">충북</option>
	                    <option value="16">제주</option>
	                </select></div>
	            </div>
	            <div class="container2">
	                <div class="container2-item"><h5>연료</h5></div>
	                <div class="container2-item"><select id="fuel" name="sellFuel">
	                    <option value="" selected>연료 선택</option>
	                    <option value="가솔린">가솔린</option>
	                    <option value="디젤">디젤</option>
	                    <option value="LPG">LPG</option>
	                    <option value="하이브리드">하이브리드</option>
	                    <option value="전기">전기</option>
	                    <option value="기타">기타</option>
	                </select></div>
	
	                <div class="container2-item"><h5>국산/수입</h5></div>
	                <div class="container2-item">
	                    <div class="select">
	                        <input type="radio" id="country" name="sellCountry" value="국산"/><label for="country">국산</label>		
	                        <input type="radio" id="country" name="sellCountry" value="수입"/><label for="country">수입</label>
	                    </div>
	                </div>
	
	                <div class="container2-item"><h5>가격</h5></div>
	                <div class="container2-item"><select id="price" name="sellPrice">
	                    <option value="0" selected>가격 선택</option>
	                    <option value="1">1,000만원 미만</option>
	                    <option value="2">1,000만원 ~ 3,000만원</option>
	                    <option value="3">3,001만원 ~ 5,000만원</option>
	                    <option value="4">5,001만원 ~ 1억원</option>
	                    <option value="5">1억원 초과</option>
	                </select></div>
	            </div>
	        </div>
	        <div class="category" style="margin-bottom: 150px; text-align: right;"><button type="submit" style="float: right;">카테고리별 검색</button></div>
        </form>
        
        <div class="thumbnail-area" id="thumbnailArea" style="width: 1200px; margin: auto; display: flex; justify-content: center; flex-wrap: wrap;">
	           <div class="paid" style="width: 1200px;">
			        <th:block th:if="${ !paidList.isEmpty() }">
						<p style="font-size: 18px;">프리미엄 광고</p>
						<hr>
		        	</th:block>
	           </div>
	           <th:block th:each="trade : ${ paidList }">
	            	<div class="trade-list" align="left" style="margin:30px; cursor:pointer;"
	            		 th:onclick="|location.href='/trade/detail?sellNo=${trade.sellNo}'|">
	            		 <div>
		            		 	<th:block th:each="attachment : ${ trade.attachFileList }">
		            		 		
		            		 		<img th:if="${ attachment.fileType == 'TITLE' }"
		            		 		     th:src="${ attachment.thumPath }" width="320px" height="200px">
		            		 		     
		            		 	 </th:block>	
		            	 </div>
	            		 <div class="trade-thum" style="width: 250px; margin: auto;">
							<div class="trade-title"><span th:text="${ trade.sellCarName }"></span><br></div>
		            		<div class="trade-des">
		            		 	<span th:text="${ trade.sellCarYear + '년식' }"></span><br>
		            		 	<span th:text="${ #numbers.formatInteger(trade.sellMileage, 0, 'COMMA') + 'km　|　 ' }"></span>
		            		 	<span th:text="${ trade.region.regionName }"></span>　　
		            		 	조회수 <span th:text="${ trade.sellCount }"></span><br>
		            		</div>
							<div class="trade-price">	
								<span th:text="${ #numbers.formatInteger(trade.sellPrice, 0, 'COMMA') + '만원' }"></span>
							</div>
						 </div>
							
	            	</div>
	            </th:block>
	        </div>
	        <hr>
	        <div class="thumbnail-area" id="thumbnailArea" style="width: 1200px; margin: auto; display: flex; justify-content: center; flex-wrap: wrap;">
	            <th:block th:each="trade : ${ tradeList }">
	            	<div class="trade-list" align="left" style="margin:30px; cursor:pointer;"
	            		 th:onclick="|location.href='/trade/detail?sellNo=${trade.sellNo}'|">
	            		 <div>
		            		 	<th:block th:each="attachment : ${ trade.attachFileList }">
		            		 		
		            		 		<img th:if="${ attachment.fileType == 'TITLE' }"
		            		 		     th:src="${ attachment.thumPath }" width="320px" height="200px">
		            		 		     
		            		 	 </th:block>	
		            	 </div>
	            		 <div class="trade-thum" style="width: 250px; margin: auto;">
							<div class="trade-title"><span th:text="${ trade.sellCarName }"></span><br></div>
		            		<div class="trade-des">
		            		 	<span th:text="${ trade.sellCarYear + '년식' }"></span><br>
		            		 	<span th:text="${ #numbers.formatInteger(trade.sellMileage, 0, 'COMMA') + 'km　|　 ' }"></span>
		            		 	<span th:text="${ trade.region.regionName }"></span>　　
		            		 	조회수 <span th:text="${ trade.sellCount }"></span><br>
		            		</div>
							<div class="trade-price">	
								<span th:text="${ #numbers.formatInteger(trade.sellPrice, 0, 'COMMA') + '만원' }"></span>
							</div>
						 </div>
							
	            	</div>
	            </th:block>
	        </div>
	        <div class="paging" id="paging" align="center" style="margin-top: 100px;">
				<th:block th:if="${ searchValue == null and criteria == null }">
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.startPage}} + '\''">&lt;&lt;</button>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.currentPage - 1}} + '\''"
						th:disabled="${ tradeList.first }">&lt;</button>
		
					<th:block
						th:each="page : ${ #numbers.sequence(paging.startPage, paging.endPage)}">
						<button
							th:onclick="'location.href=\'/trade/list?page=' + @{${page}} + '\''"
							th:text="${ page }" th:disabled="${ paging.currentPage eq page }">
						</button>
					</th:block>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.currentPage + 1}} + '\''"
						th:disabled="${ tradeList.last }">></button>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.endPage}} + '\''">>></button>
				</th:block>
				
				
				<th:block th:if="${ searchValue != null }">
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.startPage}} + '&searchValue=' + @{${searchValue}} + '\''">&lt;&lt;</button>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.currentPage - 1}} + '&searchValue=' + @{${searchValue}} + '\''"
						th:disabled="${ tradeList.first }">&lt;</button>
		
					<th:block
						th:each="page : ${ #numbers.sequence(paging.startPage, paging.endPage)}">
						<button
							th:onclick="'location.href=\'/trade/list?page=' + @{${page}} + '&searchValue=' + @{${searchValue}} + '\''"
							th:text="${ page }" th:disabled="${ paging.currentPage eq page }">
						</button>
					</th:block>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.currentPage + 1}} + '&searchValue=' + @{${searchValue}} + '\''"
						th:disabled="${ tradeList.last }">></button>
		
					<button
						th:onclick="'location.href=\'/trade/list?page=' + @{${paging.endPage}} + '&searchValue=' + @{${searchValue}} + '\''">>></button>
				</th:block>
				
			
				<th:block th:if="${ criteria != null }">
					<button
						th:onclick="'location.href=\'/trade/criteria?page=' + @{${paging.startPage}} + '&model.modelCode=' + @{${criteria.model.modelCode}} +'&sellCarYear=' + @{${criteria.sellCarYear}} + '&amp;region.regionCode=' + @{${criteria.region.regionCode}} + '&sellFuel=' + @{${criteria.sellFuel}} + '&sellCountry=' + @{${criteria.sellCountry}} + '&sellPrice=' + @{${criteria.sellPrice}} + '\''">&lt;&lt;</button>
		
					<button
						th:onclick="'location.href=\'/trade/criteria?page=' + @{${paging.currentPage - 1}} + '&model.modelCode=' + @{${criteria.model.modelCode}} +'&sellCarYear=' + @{${criteria.sellCarYear}} + '&amp;region.regionCode=' + @{${criteria.region.regionCode}} + '&sellFuel=' + @{${criteria.sellFuel}} + '&sellCountry=' + @{${criteria.sellCountry}} + '&sellPrice=' + @{${criteria.sellPrice}} + '\''"
						th:disabled="${ tradeList.first }">&lt;</button>
		
					<th:block
						th:each="page : ${ #numbers.sequence(paging.startPage, paging.endPage)}">
						<button
							th:onclick="'location.href=\'/trade/criteria?page=' + @{${page}} + '&model.modelCode=' + @{${criteria.model.modelCode}} +'&sellCarYear=' + @{${criteria.sellCarYear}} + '&amp;region.regionCode=' + @{${criteria.region.regionCode}} + '&sellFuel=' + @{${criteria.sellFuel}} + '&sellCountry=' + @{${criteria.sellCountry}} + '&sellPrice=' + @{${criteria.sellPrice}} + '\''"
							th:text="${ page }" th:disabled="${ paging.currentPage eq page }">
						</button>
					</th:block>
		
					<button
						th:onclick="'location.href=\'/trade/criteria?page=' + @{${paging.currentPage + 1}} + '&model.modelCode=' + @{${criteria.model.modelCode}} +'&sellCarYear=' + @{${criteria.sellCarYear}} + '&amp;region.regionCode=' + @{${criteria.region.regionCode}} + '&sellFuel=' + @{${criteria.sellFuel}} + '&sellCountry=' + @{${criteria.sellCountry}} + '&sellPrice=' + @{${criteria.sellPrice}} + '\''"
						th:disabled="${ tradeList.last }">></button>
		
					<button
						th:onclick="'location.href=\'/trade/criteria?page=' + @{${paging.endPage}} + '&model.modelCode=' + @{${criteria.model.modelCode}} +'&sellCarYear=' + @{${criteria.sellCarYear}} + '&amp;region.regionCode=' + @{${criteria.region.regionCode}} + '&sellFuel=' + @{${criteria.sellFuel}} + '&sellCountry=' + @{${criteria.sellCountry}} + '&sellPrice=' + @{${criteria.sellPrice}} + '\''">>></button>
				</th:block>
			</div>
        
    </div>

    <th:block th:if="${ criteria != null }">

    <script>

			const modelCode = '[[${criteria?.model.modelCode}]]';
			const sellCarYear = '[[${criteria?.sellCarYear}]]';
			const regionCode = '[[${criteria?.region.regionCode}]]';
			const sellFuel = '[[${criteria?.sellFuel}]]';
			const sellCountry = '[[${criteria?.sellCountry}]]';
			const sellPrice = '[[${criteria?.sellPrice}]]';
			
			if(modelCode) {
				document.getElementById("model").value = modelCode;
			}
			
			if(sellCarYear) {
				document.getElementById("year").value = sellCarYear;
			}
			
			if(regionCode) {
				document.getElementById("region").value = regionCode;
			}
			
			if(sellFuel) {
				document.getElementById("fuel").value = sellFuel;
			}
			
			if(sellCountry) {
				document.getElementById("country").checked = sellCountry;
			}
			
			if(sellPrice) {
				document.getElementById("price").value = sellPrice;
			}
			

	</script>
	</th:block>
    <div th:replace="common/footer.html"></div>

	

</body>
</html>